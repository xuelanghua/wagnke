<!doctype html>
<html>

	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../css/mui.min.css" rel="stylesheet" />
		<style>
			.mui-bar,body,.mui-content{
				background-color: #FFFFFF;
				box-shadow: none;
			}
			.clearfix{
				clear: both;
			}
			.maker{
				position: relative;
			}
			.maker_bj{
				width: 100%;
				height: 100%;
			}
			.maker_name,.maker1,.maker2,.maker3{
				position: absolute;
				top: 18%;
				font-size: 28px;
				left: 12%;
				color: #856C22;
			}
			.maker_position{
				font-size: 12px;
				padding: 3px 10px;
				color: #FFFFFF;
				border-radius: 15px;
				background-color: #C9A94C;
			}
			
			.maker1{
				top: 29%;
				font-size: 12px;
			}
			.maker1_chart{
				width: 14px;
				height: 14px;
				margin: 3px 10px 0 0;
			}
			.tu{
				margin: 4px 10px;
				float: right;
				border-left: 1px solid #856C22;
			}
			.tu img{
				width: 11px;
				height: 13px;
				float: right;
				margin-left: 10px;
			}
			
			.maker2{
				width: 80%;
				top: 45%;
				font-size: 10px;
			}
			.maker2_button{
				padding: 3px 5px 1px;
				border: 1px solid #CAAF62;
				color: #856C22;
				border-radius: 15px;
				font-size: 10px;
				background-color: #F0DBA2;
			}
			.jihuo{
				margin-top: -45px;
			}
			.jihuo button{
				font-size: 12px;
				border: none;
				padding: 5px 10px;
				border-top-left-radius: 14px;
				border-bottom-left-radius: 14px;
				color: #856C22;
				background: linear-gradient(to right, #F4E5BF , #E9CA7B);
			}
			
			.maker3{
				width: 75%;
				top: 66%;
				color: #FFFFFF;
				text-align: center;
				font-size: 15px;
			}
			.maker3L,.maker3R{
				width: 50%;
				margin-left: -10%;
			}
			.maker3R{
				margin-right: -10%;
				margin-top: -35px;
			}
			.maker3 .mui-icon{
				font-size: 13px;
			}
			.xian,.xian1{
				width: 1px;
				height: 30px;
				margin: 5px auto 0;
				background-color: #999999;
			}
			
			.record{
				width: 94%;
				background-color: #FFFFFF;
				position: absolute;
				left: 3%;
				right: 3%;
				top: 82%;
				border-radius: 5px;
				box-shadow: 0 0 10px 0 #999999;
			}
			.record_title{
				padding: 15px 11px;
				font-size: 15px;
				border-bottom: 1px solid #F2F2F2;
			}
			.record_title_chart img{
				width: 13px;
				height: 13px;
				position: relative;
				top: 2px;
			}
			.record_title_grade{
				font-size: 12px;
				color: #999999;
			}
			.record_title .mui-icon{
				font-size: 16px;
			}
			.money{
				font-size: 17px;
				color: #856C22;
			}
			
			.achievement{
				text-align: center;
				padding: 12px 0;
			}
			.achievementL,.achievementR{
				width: 49%;
				font-size: 12px;
			}
			.achievementR{
				margin-top: -35px;
			}
			
			.fans{
				font-size: 15px;
				padding: 0 12px;
				margin-top: 13%;
			}
			.fans-title{
				padding: 28px 0 18px 0;
			}
			.fans_information{
				padding: 20px 10px;
				border-radius: 5px;
				margin-bottom: 15px;
				box-shadow: 0 0 10px 2px #DDDDDD;
			}
			.fans_information_chart{
				width: 40px;
				height: 40px;
				margin-top: 8px;
				border-radius: 50%;
			}
			.fans_information_chart img{
				width: 100%;
				height: 100%;
				border-radius: 50%;
			}
			.vip,.vip1{
				padding: 2px 10px;
				font-size: 10px;
				color: #FFFFFF;
				margin-left: 10px;
				border-bottom-left-radius: 10px;
				border-top-right-radius: 10px;
				background: linear-gradient(to right, #B7C4DC , #8A9BB9);
			}
			.vip1{
				background: linear-gradient(to right, #F3E3B9 , #E9CB7D);
			}
			.time{
				font-size: 12px;
				margin-top: 10px;
				color: #999999;
			}
			.recommender{
				font-size: 12px;
				margin-top: 32px;
				color: #999999;
			}
			.recommender1{
				font-size: 12px;
			}
			.jfans{
				font-size: 10px;
				padding: 2px 5px;
				border-radius: 15px;
				margin-left: 5px;
				border: 1px solid #999999;
			}
			
			/* 遮拦层 */
			#mui-backdrop,#mui-backdrop1 {
				position: fixed;
				z-index: 9;
				top: 0;
				right: 0;
				bottom: 0;
				left: 0;
				display: none;
				background-color: rgba(0,0,0,.3);
			}
			/* 服务奖说明 */
			#target,#explain{
				width: 80%;
				margin: 0 auto;
				display: none;
				z-index: 99;
				position: fixed;
				top: 20%;
				left: 10%;
				right: 10%;
				border-radius: 5px;
				padding-bottom: 27px;
				background-color: #FFFFFF;
			}
			#target img{
				width: 100%;
			}
			.target_title{
				font-size: 28px;
				color: #856C22;
				margin-top: 5px;
				text-align: center;
			}
			.classification_name{
				padding: 0 18px;
				text-align: center;
				margin-top: 15px;
			}
			.grade,.target_name,.reward{
				width: 17.5%;
				height: 35px;
				line-height: 40px;
				font-size: 14px;
				background-color: #F6E2AF;
			}
			.target_name{
				width: 45%;
				margin-left: 3px;
			}
			.reward{
				width: 35%;
				margin-left: 3px;
			}
			.target_specification{
				height: 54px;
			}
			
			.grade1,.target_name1,.reward1{
				width: 17.5%;
				height: 60px;
				font-size: 11px;
				padding: 11px 0;
				background-color: #F2D58B;
			}
			.grade1{
				padding: 11px 15px;
				font-size: 18px;
			}
			.target_name1{
				width: 45%;
				text-align: left;
				margin-left: 3px;
				padding-left: 6px;
			}
			.reward1{
				width: 35%;
				padding: 20px 0;
				margin-left: 3px;
			}
			#target button{
				width: 60%;
				display: block;
				border-radius: 25px;
				margin: 27px auto 0;
				color: #FFFFFF;
				border: none;
				padding: 12px 0;
				font-size: 18px;
				background-color: #856C22;
			}
			
			/* 旅游说明 */
			.explain_chart img{
				width: 100%;
			}
			.explain_title{
				font-size: 28px;
				color: #856C22;
				margin-top: 24px;
				text-align: center;
			}
			.explain_content{
				padding: 37px 20px;
				font-size: 15px;
			}
			#explain button{
				width: 60%;
				display: block;
				border-radius: 25px;
				color: #FFFFFF;
				border: none;
				margin: 0 auto;
				padding: 12px 0;
				font-size: 18px;
				background-color: #856C22;
			}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<div class="mui-pull-right" style="font-size: 15px;margin-top: 10px;">我的权益</div>
			<h1 class="mui-title">会员中心</h1>
		</header>

		<div id="mui-content" class="mui-content mui-hidden">
			<div class="maker">
				<div class="maker_name">
					<span>{{memberInfo.group_name}}</span>
					<span class="maker_position" v-if="memberInfo.position!=''">{{memberInfo.position}}</span>
				</div>
				<div class="maker1">
					<img class="maker1_chart mui-pull-left" src="../image/maker1.png" @tap="popdiv('explain','mui-backdrop1')">
					<span>
						<span class="mui-pull-left">今年达标次数</span>
						<span style="font-size: 15px;">{{memberInfo.mark_number}}</span>
						<span class="tu">
							<img src="../image/maker2.png">
						</span>
					</span>
				</div>
				<div class="maker2">
					<div>
						<span>
							<span>到期：</span>
							<span>{{memberInfo.expire_time}}</span>
						</span>
						<span>
							<button class="maker2_button">续费￥{{memberInfo.group_annual_fee}}/年</button>
						</span>
					</div>
					<div class="jihuo mui-pull-right">
						<button v-if="memberInfo.activation_code!=''">{{memberInfo.activation_code}}</button>
						<button v-else>激活码</button>
					</div>
				</div>
				<img class="maker_bj" src="../image/maker.png">
				<div class="maker3">
					<div class="maker3L mui-pull-left">
						<div style="font-size: 15px;">{{memberInfo.service_award}}</div>
						<div style="margin-top: 5px;font-size: 10px;">
							<span>本月服务奖</span>
							<span class="mui-icon mui-icon-arrowright"></span>
						</div>
					</div>
					<div class="xian"></div>
					<div class="maker3R mui-pull-right">
						<div style="font-size: 15px;">{{memberInfo.recommended_award}}</div>
						<div style="margin-top: 5px;font-size: 10px;">
							<span>本月推荐奖</span>
							<span class="mui-icon mui-icon-arrowright"></span>
						</div>
					</div>
				</div>
				<div class="record">
					<div class="record_title">
						<div class="mui-pull-left">
							<span>我的战绩</span>
							<span>
								<span class="record_title_grade">达到目标获得奖励提升等级</span>
								<span class="record_title_chart">
									<img src="../image/record.png">
								</span>
							</span>
						</div>
						<a href="more_achievements.html">
							<div class="mui-pull-right" style="color: #999999;">
								<span>更多</span>
								<span class="mui-icon mui-icon-arrowright"></span>
							</div>
						</a>
						<div class="clearfix"></div>
					</div>
					<div class="achievement">
						<div class="achievementL mui-pull-left">
							<div>本月业绩</div>
							<div>
								<span class="money">{{memberInfo.performance}}</span>
								<span>元</span>
							</div>
						</div>
						<div class="xian1"></div>
						<div class="achievementR mui-pull-right">
							<div>{{memberInfo.market_money}}万市场</div>
							<div>
								<span class="money">{{memberInfo.market_number}}</span>
								<span>个</span>
							</div>
						</div>
						<div class="clearfix"></div>
					</div>
				</div>
			</div>

			<div class="fans">
				<div class="fans-title">我的粉丝({{memberInfo.fans_number}})</div>
				<!-- <div class="fans_information">
					<div class="fans_information_chart mui-pull-left">
						<img src="../image/bj.jpg">
					</div>
					<div class="mui-pull-left" style="margin-left: 15px;">
						<div>
							<span>强光头</span>
							<span>
								<span class="vip1">创客</span>
							</span>
						</div>
						<div class="time">
							<span>加入时间：</span>
							<span>2018-02-08</span>
						</div>
					</div>
					<div class="mui-pull-right recommender1">
						<span>推荐收益：</span>
						<span>50000</span>
					</div>
					<div class="clearfix"></div>
				</div> -->

				<div class="fans_information" v-for="(list,index) in fansLists" :key="index">
					<div class="fans_information_chart mui-pull-left">
						<img :src="list.avatarUrl">
					</div>
					<div class="mui-pull-left" style="margin-left: 15px;">
						<div>
							<span>{{list.nickName}}</span>
							<span v-if="list.direct==0">{{list.recommend_user}}</span>
							<span class="jfans" v-if="list.direct==0">间接粉丝</span>
							<span>
								<span :class="[list.group_name=='创客'?'vip1':'vip']">{{list.group_name}}</span>
							</span>
						</div>
						<div class="time">
							<span>加入时间：</span>
							<span>{{list.activation_time}}</span>
						</div>
					</div>
					<div class="mui-pull-right recommender">
						<span>推荐人：</span>
						<span>{{list.recommend_user}}</span>
					</div>
					<div class="clearfix"></div>
				</div>
			</div>
		</div>

		<div id="mui-backdrop"></div>
		<div id="target">
			<img src="../image/maker_target.png">
			<div class="target_title">说明</div>
			<div class="classification_name">
				<div>
					<div class="grade mui-pull-left"></div>
					<div class="target_name mui-pull-left">目标</div>
					<div class="reward mui-pull-left">奖励</div>
				</div>
				<div class="target_specification">
					<div class="grade1 mui-pull-left">经理</div>
					<div class="target_name1 mui-pull-left">总业绩大于等于20万2个5万市场</div>
					<div class="reward1 mui-pull-left">3万元</div>
				</div>
				<div class="target_specification">
					<div class="grade1 mui-pull-left" style="background: #F6E2AF;">总监</div>
					<div class="target_name1 mui-pull-left" style="background: #F6E2AF;">总业绩大于等于50万3个10万市场</div>
					<div class="reward1 mui-pull-left" style="background: #F6E2AF;">5万元</div>
				</div>
				<div class="target_specification">
					<div class="grade1 mui-pull-left">董事</div>
					<div class="target_name1 mui-pull-left">总业绩大于等于100万4个20万市场</div>
					<div class="reward1 mui-pull-left">10万元</div>
				</div>
				<div class="clearfix"></div>
			</div>
			<button id="button">知道了</button>
		</div>

		<div id="mui-backdrop1" onclick="hideDiv('explain','mui-backdrop1')"></div>
		<div id="explain">
			<div class="explain_chart">
				<img src="../image/maker_explain.png">
			</div>
			<div class="explain_title">说明</div>
			<div class="explain_content">
				<div>1年中任意3个月完成任务，奖励旅游活动一次超过3个每满3个月奖励一次。</div>
			</div>
			<button @tap="hideDiv('explain','mui-backdrop1')">知道了</button>
		</div>
		<script src="../js/mui.min.js"></script>
		<script src="../js/util.js"></script>
		<script src="../js/vue.min.js"></script>
		<script src="../js/Zepto.min.js"></script>
		<script type="text/javascript">
			var userInfo = getUserInfo(),
				pageNum = 0;
			var app = new Vue({
				el: "#mui-content",
				data() {
					return {
						memberInfo: {},
						fansLists: []
					}
				},
				created: () => {
					mui.init();
					mui.plusReady(function() {
						getMemberInfo();
						getFans();
					})
				},
				methods: {
					popdiv: function(explainid, backdropid) {
						document.getElementById(explainid).style.display = "block";
						document.getElementById(backdropid).style.display = "block";

						document.getElementById(backdropid).style.width = document.body.scrollWidth;
						$("#" + backdropid).height($(document).height());
					},
					hideDiv: function(explainid, backdropid) {
						logs("asdffa");
						document.getElementById(explainid).style.display = 'none';
						document.getElementById(backdropid).style.display = 'none';
					}
				},
				mounted: () => {
					mui(".mui-content .jihuo").on("tap", "button", function() {
						openPage('activation_code_collection.html', 'activation_code_collection', '#f7f7f7', '');
					})
					document.querySelector(".mui-content").classList.remove('mui-hidden');
				}
			})

			function getMemberInfo() {
				mui.post($ajaxUrl + 'member&action=member_info', {
					token: userInfo.token
				}, function(res) {
					if (res.errno) {
						logs(res.message);
					} else {
						// 请求成功
						app.memberInfo = res.data;
					}
				}, 'json');
			}

			function getFans() {
				pageNum += 1;
				mui.post($ajaxUrl + 'member&action=fans', {
					token: userInfo.token,
					skip: pageNum,
					limit: 30
				}, function(res) {
					if (res.errno) {
						logs(res.message);
					} else {
						// 请求成功
						app.fansLists = res.data;
					}
				}, 'json');
			}
		</script>
	</body>

</html>
