<!doctype html>
<html>

	<head>
		<meta charset="utf-8">
		<title>会员中心</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../css/mui.min.css" rel="stylesheet" />
		<link href="../icomoon/style.css" type="text/css" rel="stylesheet" />
		<style>
			.my-equity{
				height: 100%;
				width: auto;
				padding: 0 0.1rem;
				margin-right: -10px;
				font-size: 0.28rem;
				position: relative;
				z-index: 12;
				display: flex;
				align-items: center;
				justify-content: center;
				color: #333333;
			}
			.maker-head{
				height: 6.45rem;
				width: 100%;
				background: #FFFFFF url("../image/agency-head-img.jpg")center top no-repeat;
				background-size: contain;
				margin-bottom: 0.15rem;
				padding: 0 0.2rem;
			}
			.first-section{
				width: 100%;
				height: 4.5rem;
				padding: 1.08rem 0.36rem 0 0.78rem;
				box-sizing: border-box;
				overflow: hidden;
			}
			.first-section h2{
				font-size: 0.56rem;
				color: #885A3D;
				font-weight: normal;
				display: flex;
				align-items: flex-end;
			}
			.first-section .wangwang{
				font-size: 0.24rem;
				color: #885A3D;
				display: flex;
				align-items: center;
				margin: 0.15rem 0 0.5rem;
			}
			.first-section .wangwang img{
				width: 0.24rem;
				height: 0.24rem;
			}
			.first-section .wangwang span{
				display: inline-flex;
				margin: 0 0.1rem;
			}
			.card-bottom{
				display: flex;
				align-items: center;
				justify-content: space-between;
				overflow: hidden;
				padding: 0.2rem 0;
			}
			.card-bottom span{
				font-size: 0.2rem;
				color: #885A3D;
			}
			
			.card-bottom .left-btn,.card-bottom .right-btn{
				display: inline-flex;
				border-radius: 0.17rem;
				background: linear-gradient(to right, #fae5d2 , #f4c59c);
				width: 1.24rem;
				height: 0.35rem;
				border:1px solid #885A3D;
				margin-left: 0.2rem;
				font-size: 0.2rem;
				align-items: center;
				justify-content: center;
				padding-top: 0.05rem;
			}
			.card-bottom .right-btn{
				border: none;
				width: auto;
				height: auto;
				font-size: 0.3rem;
				padding-left:0.2rem;
				padding-right:0.2rem;
				border-right: none;
				margin-right: 0;
				border-radius: 0.3rem;
				border-top-right-radius: 0;
				border-bottom-right-radius: 0;
				box-shadow: 0 0 2px 2px rgba(133,108,34,0.2);
			}
			.bonus-section{
				width: 100%;
				height: 1.5rem;
				box-shadow: 0 0 10px 5px rgba(0,0,0,0.1);
				overflow: hidden;
				border-radius: 0.1rem;
				display: flex;
				align-content: center;
				justify-content: center;
			}
			.items {
				flex-grow: 1;
				text-align: center;
				position: relative;
				padding-top: 0.3rem;
			}
			.items span{
				display: inline-flex;
				padding-right:0.4rem;
				position: relative;
				color: #000000;
				font-size: 0.24rem;
				margin-bottom: 0.1rem;
			}
			.items p{
				color: #856c22;
				font-size: 0.35rem;
				margin-bottom: 0;
				text-align: center;
			}
			.items .unit{
				font-size: 0.24rem;
				color: #999999;
				margin-left: 0.05rem;
				margin-bottom: 0;
				padding: 0;
			}
			.mui-navigate-right:after{
				right: 0;
				font-size: 0.36rem;
				color: #999999;
				top: 50%;
				-webkit-transform: translateY(-51%);
				transform: translateY(-50%);
			}
			.items:first-of-type:after{
				content: '';
				width: 1px;
				height: 0.55rem;
				top: 50%;
				right: 0;
				position: absolute;
				transform: translateY(-50%);
				-webkit-transform: translateY(-50%);
				background-color: #dddddd;
			}
			.fans{
				background-color: #FFFFFF;
			}
			.fans .title{
				height: 1.14rem;
				margin: 0;
				display: flex;
				align-items: center;
				position: relative;
				justify-content: space-between;
				padding: 0 0.4rem 0 0.2rem;
				font-size:0.3rem;
			}
			.fans .title span:last-of-type{
				color: #999999;
			}
			.fans .mui-table-view-cell{
				display: flex;
				align-items: center;
				justify-content: space-between;
			}
			.user-head-img{
				width: 0.75rem;
				height: 0.75rem;
				border-radius: 50%;
				margin-right: 0.2rem;
				flex-shrink: 0;
			}
			.fans .mui-table-view-cell{
				height: 1.58rem;
				padding: 0 0.2rem;
			}
			.fans .mui-table-view-cell span{
				font-size: 0.3rem;
				color: #333333;
			}
			.flex-right{
				flex-grow: 1;
			}
			.flex-right .mui-clearfix{
				margin-bottom: 0.2rem;
				overflow: hidden;
			}
			.mui-table-view-cell:after{
				left: 1rem;
			}
			.fans .mui-table-view-cell .create-time,.fans .mui-table-view-cell .person{
				color: #999999;
				font-size: 0.24rem;
			}
			.mui-table-view-cell .flex-right .vip,
			.mui-table-view-cell .flex-right .vip1,
			.mui-table-view-cell .flex-right .vip2,
			.mui-table-view-cell .flex-right .vip3{
				padding: 0.05rem 0.16rem 0.02rem;
				font-size: 0.2rem;
				color: #FFFFFF;
				margin-left: 0.2rem;
				border-bottom-left-radius: 0.2rem;
				border-top-right-radius: 0.2rem;
				background: linear-gradient(to right, #B7C4DC , #8A9BB9);
			}
			.mui-table-view-cell .flex-right .vip1{
				background: linear-gradient(to right, #F3E3B9 , #E9CB7D);
			}
			.mui-table-view-cell .flex-right .vip2{
				background: linear-gradient(to right, #f4dec6 , #e3a472);
			}
			.mui-table-view-cell .flex-right .vip3{
				background: linear-gradient(to right, #f4dec6 , #e3a472);
			}
			.updata-position{
				width: auto;
				padding: 0.05rem 0.12rem 0.01rem;
				height: 0.35rem;
				background-color: #885A3D;
				border-radius: 1.75rem;
				font-size: 0.2rem;
				color: #FFFFFF;
				display: inline-flex;
				align-items: center;
				margin-left: 0.2rem;
			}
			.updata-position img{
				height: 0.2rem;
				width: auto;
				margin-left: 2px;
				margin-top: -2px;
			}
		</style>
	</head>

	<body class="mui-hidden">
		<header class="mui-bar mui-bar-nav">
			<div class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></div>
			<h1 class="mui-title">会员中心</h1>
			<div class="mui-pull-right my-equity">我的权益</div>
		</header>

		<div id="mui-content" class="mui-content setting-container">
			<div class="maker-head">
				<div class="first-section">
					<h2>{{memberInfo.group_name}}<span class="updata-position" v-if="memberInfo.group_id<5">升级<img src="../image/agent-arrows-01.png"
							 alt=""></span></h2>
					<div class="wangwang"><span class="icon-wangwang"></span><span>旺旺</span>{{memberInfo.wang || 0}}</div>
					<div class="card-bottom">
						<div>
							&nbsp;
						</div>
						<span class="right-btn" v-if="memberInfo.activation_code!='0/0'" @tap="goCodeList">激活码：{{memberInfo.activation_code}}</span>
						<span class="right-btn" v-else @tap="exchangeCode">激活码</span>
					</div>
				</div>
				<div class="bonus-section">
					<div class="items service-award">
						<span class="mui-navigate-right">本月服务奖</span>
						<p>{{memberInfo.service_award || 0}}<span class="unit">元</span></p>
					</div>
					<div class="items accumulated">
						<span class="mui-navigate-right">推荐奖累计</span>
						<p>{{memberInfo.recommended_award}}<span class="unit">元</span></p>
					</div>
				</div>
			</div>
			<div class="fans">
				<div class="title"><span>我的粉丝（{{memberInfo.fans_number||0}}）</span><span class="mui-navigate-right accumulated">更多</span></div>
				<ul class="mui-table-view">
					<li class="mui-table-view-cell" v-for="(list,index) in fansLists" :key="index">
						<img class="user-head-img" src="../image/kaol.jpg">
						<div class="flex-right">
							<div class="mui-clearfix">
								<span class="user-name">{{list.nickName}}</span>
								<span :class="[list.group_name=='创客'?'vip1':'vip']">{{list.group_name}}</span>
								<span class="mui-pull-right">+60</span>
							</div>
							<div>
								<span class="create-time">加入时间：{{list.activation_time}}</span>
								<span class="mui-pull-right person">推荐人：{{list.recommend_user}}</span>
							</div>
						</div>
					</li>
			</div>
		</div>
		<script src="../js/mui.min.js"></script>
		<script src="../js/util.js"></script>
		<script src="../js/vue.min.js"></script>
		<script type="text/javascript">
			mui.init();
			// 初始化字体大小
			var viewport = document.documentElement.clientWidth;
			if (viewport > 750) {
				viewport = 750
			}
			document.documentElement.style.fontSize = viewport / 7.5 + "px";
			document.querySelector(".mui-hidden").classList.remove("mui-hidden");
			// 初始化字体大小结束
			mui.plusReady(function() {})
			var userInfo = getUserInfo(),
				pageNum = 0;
			var app = new Vue({
				el: "#mui-content",
				data() {
					return {
						memberInfo: {
							group_id: 3,
							group_name: '服务站',
							position: '大区经理',
							expire_time: '2019-06-19',
							group_annual_fee: '199',
							activation_code: '665/23565',
							service_award: '5,050',
							recommended_award: 23559,
							wang: '183,567,941'
						},
						fansLists: []
					}
				},
				created: () => {
					mui.init();
					mui.plusReady(function() {
						getMemberInfo();
						getFans();
					})
				},
				mounted: () => {
					document.querySelector(".mui-content").classList.remove('mui-hidden');
				},
				methods:{
					goCodeList: function() {
						openPage('activate_code.html', 'activate_code', '#f7f7f7', '');
					},
					exchangeCode: function() {
						openPage('activation_code_collection.html', 'activation_code_collection', '#f7f7f7', '');
					}
				}
			})

			function getMemberInfo() {
				mui.post($ajaxUrl + 'member&action=member_info', {
					token: userInfo.token
				}, function(res) {
					if (res.errno) {
						logs(res.message);
					} else {
						// 请求成功
						app.memberInfo = res.data;
					}
				}, 'json');
			}
			// 显示激活码
			mui(".mui-content .jihuo").on("tap", ".show-key", function() {
				openPage('activate_code.html', 'activate_code', '#ffffff', '');
			})
			// 领取激活码
			mui(".mui-content .jihuo").on("tap", ".get-key", function() {
				openPage('activation_code_collection.html', 'activation_code_collection', '#f7f7f7', '');
			})
			// 服务奖
			mui('.mui-content').on('tap', '.service-award', function() {
				openPage('service_award.html', 'service_award', '#f7f7f7', '');
			})
			// 推荐奖
			mui('.mui-content').on('tap', '.accumulated', function() {
				openPage('my_fans.html', 'my_fans', '#f7f7f7', '');
			})
			// 升级
			mui('.mui-content').on('tap', '.updata-position', function() {
				openPage('renew.html', 'renew', '#f7f7f7', '');
			})
			function getFans() {
				pageNum += 1;
				mui.post($ajaxUrl + 'member&action=fans', {
					token: userInfo.token,
					skip: pageNum,
					limit: 30
				}, function(res) {
					if (res.errno) {
						logs(res.message);
					} else {
						// 请求成功
						app.fansLists = res.data;
					}
				}, 'json');
			}
		</script>
	</body>

</html>
