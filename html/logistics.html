<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
		<link href="../css/mui.css" rel="stylesheet" />
		<style>
			.clearfix{
				clear: both;
			}
			/* .mui-bar{
				background-color: #FFFFFF;
				box-shadow: none;
			} */
			p{
				margin-bottom: 0;
			}
			.logistics_title{
				font-size: 14px;
				padding: 13px 10px;
				background-color: #FFFFFF;
			}
			.logistics_details{
				padding: 34px 29px;
				background-color: #FFFFFF;
				margin-top: 10px;
			}
			.circularw{
				width: 20px;
				height: 20px;
				padding: 4px;
				border: 1px solid #999999;
				border-radius: 50%;
				position: relative;
				background-color: #FFFFFF;
			}
			.circular,.circular1{
				width: 10px;
				height: 10px;
				background-color: #F5CA3A;
				border-radius: 50%;
			}
			.circular1{
				background-color: #999999;
			}
			.logistics_detailsR{
				width: 96%;
				font-size: 14px;
				margin-left: -10px;
				padding-left: 10%;
				border-left: 1px solid #999999;
			}
			.logistics_name{
				padding-bottom: 35px;
			}
		</style>
	</head>
	<body>
		<header class="mui-bar mui-bar-nav">
			<div class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></div>
			<h1 class="mui-title">物流</h1>
		</header>
		<div class="mui-content">
			<div class="logistics_title">
				<div>
					<span>订单编号：</span>
					<span>12559845188136</span>
				</div>
				<div style="margin-top: 15px;">
					<span>配送方式：</span>
					<span>顺风快递 52316965956</span>
				</div>
			</div>
			<div class="logistics_details" id="express_list_container">
				<!-- <div>
					<div class="logistics_detailsL mui-pull-left">
						<div class="circularw">
							<div class="circular"></div>
						</div>
					</div>
					<div class="logistics_detailsR mui-pull-left">
						<div class="logistics_name">
							<div>[昆明市] 你的快递已到达官渡区分管中心手动阀手动阀手动阀撒发生发射点发生反对撒飞洒飞洒发洒发</div>
							<div style="margin-top: 10px;">2018-05-22 12:20:58</div>
						</div>
					</div>
					<div class="clearfix"></div>
				</div>
				<div>
					<div class="logistics_detailsL mui-pull-left">
						<div class="circularw">
							<div class="circular1"></div>
						</div>
					</div>
					<div class="logistics_detailsR mui-pull-left">
						<div class="logistics_name">
							<div>[昆明市] 你的快递已到达官渡区分管中心</div>
							<div style="margin-top: 10px;">2018-05-22 12:20:58</div>
						</div>
					</div>
					<div class="logistics_detailsL mui-pull-left">
						<div class="circularw">
							<div class="circular"></div>
						</div>
					</div>
					<div class="logistics_detailsR mui-pull-left" style="border-left:0px;">
							<div>已发货</div>
					</div>
					<div class="clearfix"></div>
				</div> -->
			</div>
		</div>
		<script src="../js/mui.js"></script>
		<script src="../js/util.js"></script>
		<script src="../js/Zepto.min.js"></script>
		<script type="text/javascript">
			mui.init({
				swipeBack: true
			})
			mui.plusReady(function() {
				refreshExpressInfo();
			});
			/**
			 *刷新快递信息
			 */
			function refreshExpressInfo() {
				var userInfo = getUserInfo();
				var ajax_url = $ajaxUrl + 'express';
				mui.ajax(ajax_url, {
					data: {
						token: userInfo.token,
						action: 'getEcpressInfoList',
					},
					dataType: 'json',
					type: 'post',
					timeout: 10000,
					success: function(ret) {
						console.log(JSON.stringify('成功'));
						console.log(JSON.stringify(ret.data.express_info.data));
						//获取快递信息
						var express_info_list = ret.data.express_info.data;
						//循环读出快递信息
						var express_str = '';
						for (var i = 0; i < express_info_list.length; i++) {
							var left_point = '<div class="circular1"></div>';
							if (i == 0) {
								left_point = '<div class="circular"></div>';
							}
							console.log(JSON.stringify(express_info_list[i]));
							express_str += '' + '<div>\n' + '<div class="logistics_detailsL mui-pull-left">\n' +
								'<div class="circularw">\n' + '' + left_point + '' + '</div>\n' + '</div>\n' +
								'<div class="logistics_detailsR mui-pull-left">\n' + '<div class="logistics_name">\n' + '<div>' +
								express_info_list[i].context + '</div>\n' + '<div style="margin-top: 10px;">' + express_info_list[i].time +
								'</div>\n' + '</div>\n' + '</div>\n' + '<div class="clearfix"></div>\n' + '</div>';
						}
						express_str += '<div>\n' +
                    '<div class="logistics_detailsL mui-pull-left">\n' +
                    '<div class="circularw">\n' +
                    '<div class="circular"></div>\n' +
                    '</div>\n' +
                    '</div>\n' +
                    '<div class="logistics_detailsR mui-pull-left" style="border-left:0px;>\n' +
                    '<div class="logistics_name">\n' +
                    '<div>已发货</div>\n' +
                    '<div style="margin-top: 10px;"></div>\n' +
                    '</div>\n' +
                    '</div>\n' +
                    '<div class="clearfix"></div>\n' +
                    '</div>';
						$('#express_list_container').html(express_str);
					},
					error: function(xhr, type, errorThrown) {
						console.log(JSON.stringify('失败'));
						console.log(JSON.stringify(errorThrown));
					}
				});
			}
		</script>
	</body>
</html>
