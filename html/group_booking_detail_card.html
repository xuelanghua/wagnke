<!doctype html>
<html>

	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link rel="stylesheet" href="../css/mui.min.css">
		<style type="text/css">
			.lists{
				margin: 15px 0;
				padding: 10px;
				box-sizing: border-box;
			}
			.mini-card {
				background-color: #FFFFFF;
				position: relative;
				width: 100%;
				border-radius: 10px;
				overflow: hidden;
			}
			.top-card{
				margin-bottom: 10px;
			}
			.color-bar{
				background-color: #f5ca3a;
				width: 100%;
				height: 0.12rem;
			}
			.mini-card-head{
				height: 0.9rem;
				display: flex;
				align-items: center;
				padding-left: 0.25rem;
				border-bottom: 1px  solid #F2F2F2;
			}
			.mini-card-head p{
				color: #333333;
				margin: 0;
				font-size: 0.3rem;
			}
			.mini-card-head .loser{
				color: #999999;
			}
			.mini-card.loser .color-bar{
				background-color: #999999;
			}
			.mini-card-head span{
				color: #f5ca3a;
			}
			.mini-card-inside{
				padding: 0.25rem;
				width: 100%;
				box-sizing: border-box;
				overflow: hidden;
				display: flex;
				align-items: center;
			}
			.mini-card-inside img{
				width: 1.33rem;
				height: 1.33rem;
				object-fit: cover;
				flex-shrink: 0;
				margin-right: 0.15rem;
				
			}
			.mini-card-inside-right {
				width: 5.2rem;
			}
			.mini-card-inside-right span{
				font-size: 0.24rem;
			}
			.mini-card-inside-right .title{
				margin-bottom: 0;
				font-size: 0.3rem;
				color: #333333;
			}
			.price {
				color: #f52e20;
				margin-left: 10px;
			}
			.mui-badge {
				background-color: #bdbdbd;
				color: #FFFFFF;
				margin-right: 5px;
				font-size: 0.24rem;
			}
			.price-cont{
				padding: 0.06rem 0;
			}
			.count-down{
				height: 1rem;
				width: 100%;
				display: flex;
				align-items: center;
				justify-content: center;
				font-size: 0.3rem;
				position: relative;
			}
			.count-down span{
				color:#f5ca3a ;
			}
			.count-down i{
				display: inline-block;
				height: 1px;
				background-color: #f4f4f4;
				position: absolute;
				top: 49.9%;
				width: 90%;
				left: 5%;
			}
			.count-down .count-down-inside{
				background-color: #FFFFFF;
				position: relative;
				z-index: 2;
				padding:  0 20px;
			}
			.flex-center {
				display: flex;
				align-items: center;
				justify-content: center;
			}
			.person-head{
				position: relative;
				margin-right: 10px;
				line-height: 0;
				font-size: 0;
			}
			.head-img{
				width: 0.97rem;
				height: 0.97rem;
				border-radius: 50%;
				object-fit: cover;
			}
			.sign{
				width: 0.55rem;
				position: absolute;
				right: -5px;
				bottom: 0;
			}
			.person-head-container{
				padding:0.1rem 0 0.6rem;
			}
			.mui-btn.mui-btn-yellow{
				width: 6.45rem;
				height: 0.69rem;
				margin: 0 auto 0.4rem;
				padding: 0;
				font-size: 0.3rem;
				color: #FFFFFF;
				background-color: #f5ca3a;
				border-color:#f5ca3a ;
				border-radius: 0.1rem;
			}
			[v-cloak] {
				display: none;
			}
		</style>
	</head>

	<body>
		<div id="mui-content" v-cloak>
			<header class="mui-bar mui-bar-nav">
				<span class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></span>
				<h1 class="mui-title">拼团详情</h1>
			</header>
			<div class="mui-content">
				<div class="lists">
					<div class="mini-card top-card">
						<div class="color-bar"></div>
						<div class="mini-card-head">
							<p v-if="goods_detail.collage_status==1">还差<span>{{goods_detail.left_number}}人</span>成团</p>
							<span v-else-if="goods_detail.collage_status==3||goods_detail.collage_status==2">已成团</span>
							<p class="loser" v-else-if="goods_detail.collage_status==4">拼团失败</p>
						</div>
						<div class="mini-card-inside">
							<img :src="goods_detail.cover" >
							<div class="mini-card-inside-right">
								<p class="title mui-ellipsis">{{goods_detail.name}}</p>
								<div class="price-cont">
									<span>{{spe.title}}</span>
									<span class="price">&yen;{{goods_detail.price}}</span>
								</div>
								<div>
									<span class="mui-badge">每人{{goods_detail.number}}件起</span>
									<span class="mui-badge">{{goods_detail.people}}人拼团</span>
									<span class="mui-badge">{{goods_detail.expire_time}}h</span>
								</div>
							</div>
						</div>
					</div>
					<div class="mini-card bottom-card">
						<div class="count-down">
							<i></i>
							<div class="count-down-inside">
								剩余 <span>{{count_down}}</span>
							</div>
						</div>
						<div class="flex-center person-head-container">
							<div class="person-head">
								<img class="head-img" src="../image/5E0eH.png" alt="">
								<img class="sign" src="../image/icon/team-king-sign.png" >
							</div>
							<div class="person-head">
								<img class="head-img" src="../image/icon/group-booking-detail-card-icon.png" >
							</div>
							<div class="person-head">
								<img class="head-img" src="../image/icon/group-booking-detail-card-icon.png" >
							</div>
						</div>
					</div>
				</div>
				<div class="lists mui-hidden">
					<div class="mini-card top-card">
						<div class="color-bar"></div>
						<div class="mini-card-head">
							<p>还差<span>2人</span>成团</p>
							<!-- <span>已成团</span> -->
							<!-- <p class="loser">拼团失败</p> -->
						</div>
						<div class="mini-card-inside">
							<img src="../image/5E0eH.png" >
							<div class="mini-card-inside-right">
								<p class="title mui-ellipsis">四件套全棉纯棉田园风小清新清新四件套全棉纯棉田园风小清新清新四件套全棉纯棉田园风纯棉田园风纯棉田园风小清新清新...</p>
								<div class="price-cont">
									<span>红色</span>
									<span class="price">&yen;250.00</span>
								</div>
								<div>
									<span class="mui-badge">每人1件起</span>
									<span class="mui-badge">6人拼团</span>
									<span class="mui-badge">25h</span>
								</div>
							</div>
						</div>
					</div>
					<div class="mini-card bottom-card">
						<div class="count-down">
							<i></i>
							<div class="count-down-inside">
								剩余 <span>1天07:58:21</span>
							</div>
						</div>
						<div class="flex-center person-head-container">
							<div class="person-head">
								<img class="head-img" src="../image/5E0eH.png" alt="">
								<img class="sign" src="../image/icon/team-king-sign.png" >
							</div>
							<div class="person-head">
								<img class="head-img" src="../image/icon/group-booking-detail-card-icon.png" >
							</div>
							<div class="person-head">
								<img class="head-img" src="../image/icon/group-booking-detail-card-icon.png" >
							</div>
						</div>
					</div>
				</div>
				<div class="lists  mui-hidden">
					<div class="mini-card top-card loser">
						<div class="color-bar"></div>
						<div class="mini-card-head">
							<p class="loser">拼团失败</p>
						</div>
						<div class="mini-card-inside">
							<img src="../image/5E0eH.png" >
							<div class="mini-card-inside-right">
								<p class="title mui-ellipsis">四件套全棉纯棉田园风小清新清新四件套全棉纯棉田园风小清新清新四件套全棉纯棉田园风纯棉田园风纯棉田园风小清新清新...</p>
								<div class="price-cont">
									<span>红色</span>
									<span class="price">&yen;250.00</span>
								</div>
								<div>
									<span class="mui-badge">每人1件起</span>
									<span class="mui-badge">6人拼团</span>
									<span class="mui-badge">25h</span>
								</div>
							</div>
						</div>
					</div>
					<div class="mini-card bottom-card">
						<div class="count-down mui-hidden">
							<i></i>
							<div class="count-down-inside">
								剩余 <span>1天07:58:21</span>
							</div>
						</div>
						<div class="flex-center person-head-container">
							<div class="person-head">
								<img class="head-img" src="../image/5E0eH.png" alt="">
								<img class="sign" src="../image/icon/team-king-sign.png" >
							</div>
							<div class="person-head">
								<img class="head-img" src="../image/icon/group-booking-detail-card-icon.png" >
							</div>
							<div class="person-head">
								<img class="head-img" src="../image/icon/group-booking-detail-card-icon.png" >
							</div>
						</div>
						<button type="button" class="mui-btn mui-btn-yellow mui-btn-block">查看详情</button>
					</div>
				</div>
			</div>
		</div>
		<script src="../js/mui.js"></script>
		<script src="../js/util.js"></script>
		<script src="../js/vue.min.js"></script>
		<script type="text/javascript">
			var userInfo = getUserInfo();
			var app = new Vue({
				el: "#mui-content",
				data: {
					collage_id:'',
					goods_detail:{},
					count_down:'',
					spe:''
				},
				created: function() {
					// 初始化字体大小
					var viewport = document.documentElement.clientWidth;
					if (viewport > 750) {
						viewport = 750
					}
					document.documentElement.style.fontSize = viewport / 7.5 + "px";
					// 初始化字体大小结束	
				},
				methods: {

				},
				mounted: function() {
					mui.init({
						beforeback: function() {
							//plus.navigator.setStatusBarStyle("light");
						}
					});
					mui.plusReady(function() {
						var self = plus.webview.currentWebview();
						app.collage_id=self.collage_id;
						logs(app.collage_id);
						logs("1233333333");
						getDetail();
					})
				}
			})
			// 获取详情
			function getDetail(){
				mui.post($ajaxUrl + 'marketing&action=collage_order_detail', {
					token: userInfo.token,
					collage_id: app.collage_id
				}, function(res) {
					logs(res);
					if (res.errno == 0) {
						app.goods_detail = res.data;
						app.spe=res.data.spe.title;
						// clock(res.data.end_time);
						// clock(1572600810000);
					} else {
				
					}
				}, 'json');
			}
			// 倒计时
			function clock(endtimer) {
				var today = new Date(), //当前时间
					h = today.getHours(),
					m = today.getMinutes(),
					s = today.getSeconds();
				var stopTime = new Date(endtimer), //结束时间
					stopH = stopTime.getHours(),
					stopM = stopTime.getMinutes(),
					stopS = stopTime.getSeconds();
				var shenyu = stopTime.getTime() - today.getTime(),
					shengyuD = parseInt(shenyu / (60 * 60 * 24 * 1000)),
					D = parseInt(shenyu) - parseInt(shengyuD * 60 * 60 * 24 * 1000),
					shengyuH = parseInt(D / (60 * 60 * 1000)),
					H = D - shengyuH * 60 * 60 * 1000,
					shengyuM = parseInt(H / (60 * 1000)),
					M = H - shengyuM * 60 * 1000;
				S = parseInt((shenyu - shengyuD * 60 * 60 * 24 * 1000 - shengyuH * 60 * 60 * 1000 - shengyuM * 60 * 1000) /
					1000);
				if (shengyuH > 0 || shengyuM > 0 || S > 0) {
					setTimeout(clock, 500);
					console.log("撒旦法")
				} else {
					// 倒计时结束
					console.log("789798789798")
				}
			}
			clock(1572600810000); 
		</script>
	</body>

</html>
