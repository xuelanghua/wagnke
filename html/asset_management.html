<!doctype html>
<html>

	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../css/mui.css" type="text/css" rel="stylesheet" />
		<link href="../css/mui.picker.min.css" rel="stylesheet" />
		<link href="../icomoon/style.css" type="text/css" rel="stylesheet"/>
		<style>
			body {
				padding: 0;
				margin: 0;
				overflow-x: hidden;
			}

			h1,
			h2,
			h3,
			h4,
			h5,
			h6 {
				font-weight: lighter;
			}

			.mui-bar {
				box-shadow: none;
				background-color: #2289FF;
			}

			.mui-bar h1,
			.mui-icon {
				color: #FFFFFF;
			}

			.banner {
				width: 100%;
				background-color: #FFFFFF;
			}

			.enterplorer-banner {
				position: relative;
				margin-bottom: 80px;
				padding-top: 40px;
			}

			.am-container {
				max-width: 1180px;
				width: 100%;
				margin: 0 auto;
			}

			.am-container img {
				height: 280px;
			}

			.bg-bubbles {
				position: absolute;
				top: 0;
				left: 0;
				width: 90%;
				height: 100%;
			}

			ul,
			li {
				margin: 0;
				padding: 0;
			}

			.bg-bubbles li {
				position: absolute;
				list-style: none;
				display: block;
				width: 20px;
				height: 20px;
				background-color: rgba(255, 255, 255, .15);
				bottom: -80px;
				-webkit-animation: square 25s infinite;
				animation: square 25s infinite;
				-webkit-transition-timing-function: linear;
				transition-timing-function: linear;
			}

			.bg-bubbles li:nth-child(1) {
				left: 10%
			}

			.bg-bubbles li:nth-child(2) {
				left: 20%;
				width: 40px;
				height: 40px;
				-webkit-animation-delay: 200ms;
				animation-delay: 200ms;
				-webkit-animation-duration: 17s;
				animation-duration: 17s
			}

			.bg-bubbles li:nth-child(3) {
				left: 25%;
				width: 35px;
				height: 35px;
				-webkit-animation-delay: 400ms;
				animation-delay: 400ms
			}

			.bg-bubbles li:nth-child(4) {
				left: 40%;
				width: 30px;
				height: 30px;
				-webkit-animation-duration: 10s;
				animation-duration: 10s;
				background-color: rgba(255, 255, 255, .25)
			}

			.bg-bubbles li:nth-child(5) {
				left: 70%
			}

			.bg-bubbles li:nth-child(6) {
				left: 80%;
				width: 50px;
				height: 50px;
				-webkit-animation-delay: 3s;
				animation-delay: 3s;
				background-color: rgba(255, 255, 255, .2)
			}

			.bg-bubbles li:nth-child(7) {
				left: 32%;
				width: 50px;
				height: 50px;
				-webkit-animation-delay: 7s;
				animation-delay: 7s
			}

			.bg-bubbles li:nth-child(8) {
				left: 55%;
				width: 20px;
				height: 20px;
				-webkit-animation-delay: 15s;
				animation-delay: 15s;
				-webkit-animation-duration: 40s;
				animation-duration: 40s
			}

			.bg-bubbles li:nth-child(9) {
				left: 25%;
				width: 18px;
				height: 18px;
				-webkit-animation-delay: 2s;
				animation-delay: 2s;
				-webkit-animation-duration: 40s;
				animation-duration: 40s;
				background-color: rgba(255, 255, 255, .3)
			}

			.bg-bubbles li:nth-child(10) {
				left: 90%;
				width: 60px;
				height: 60px;
				-webkit-animation-delay: 11s;
				animation-delay: 11s
			}

			@-webkit-keyframes square {
				0% {
					-webkit-transform: translateY(0);
					transform: translateY(0)
				}

				100% {
					-webkit-transform: translateY(-700px) rotate(600deg);
					transform: translateY(-700px) rotate(600deg)
				}

			}

			@keyframes square {
				0% {
					-webkit-transform: translateY(0);
					transform: translateY(0)
				}

				100% {
					-webkit-transform: translateY(-700px) rotate(600deg);
					transform: translateY(-700px) rotate(600deg)
				}

			}

			.clearfix {
				clear: both;
			}

			.income {
				font-size: 12px;
				color: #333333;
			}

			.more {
				padding: 10px 20px;
				border-bottom: 1px solid #F2F2F2;
			}

			.screen {
				width: 22%;
			}

			.xian {
				width: 1px;
				height: 25px;
				float: left;
				margin-top: 13px;
				background-color: #DFDFDD;
			}

			.screenR {
				padding: 15px 0 15px 15px;
				font-size: 15px;
				color: #999999;
			}

			.screenR .mui-icon {
				color: #999999;
				float: right;
				margin-top: 2px;
				font-size: 16px;
			}

			.income-content {
				text-align: center;
				position: absolute;
				top: 20%;
				width: 100%;
				color: #FFFFFF;
			}

			.balance {
				width: 49%;
			}

			.function_button {
				width: 66%;
				margin: 0 auto;
				border-radius: 25px;
				border: 1px solid #FFFFFF;
				overflow: hidden;
			}

			.function_button button {
				width: 50%;
				font-size: 12px;
				border: none;
				color: #FFFFFF;
				background: none;
			}
			.function_button button:first-of-type {
				border-top-left-radius: 25px;
				border-bottom-left-radius: 25px;
			}
			.function_button button:last-of-type {
				border-top-right-radius: 25px;
				border-bottom-right-radius: 25px;
			}
			

			.recharge {
				width: 1px;
				height: 15px;
				margin: 7px auto 0;
				background-color: #FFFFFF;
			}

			.money {
				margin-top: -22px;
			}

			.income-title {
				text-align: center;
			}

			.income-title p {
				font-size: 13px;
				color: #D6E3FA;
				margin: 0;
			}

			.tug {
				width: 49%;
				margin-top: -113px;
			}

			.nr {
				font-size: 22px;
				padding: 26px 0;
				font-size: 30px;
			}

			.tug button {
				width: 60%;
				font-size: 12px;
				color: #FFFFFF;
				padding: 6px 0;
				border-radius: 25px;
				background: none;
				border: 1px solid #FFFFFF;
			}

			.shuxia {
				width: 1px;
				height: 100px;
				background-color: #b7d8ff;
				margin: 6px auto;
			}

			.Detailed {
				width: 100%;
				margin-top: -80px;
			}

			.Detailed1l {
				width: 41px;
				margin-top: 9px;
				margin-left: 11px;
			}

			.Detailed1l img {
				width: 100%;
				height: 100%;
			}

			.Detailed1r {
				width: 82%;
				padding: 9px 0;
				border-bottom: 1px solid #F2F2F2;
			}

			.example {
				width: 100%;
				margin-bottom: 66px;
			}

			.hd {
				font-size: 15px;
				margin-top: 38px;
				background-color: #FFFFFF;
			}

			.hd li {
				display: block;
				width: 50%;
				float: left;
				padding: 10px 0;
				text-align: center;
			}

			.hd li.current {
				color: #2289FF;
				border-bottom: 2px solid #2289FF;
			}

			.bd {
				margin-top: 10px;
				background-color: #FFFFFF;
			}

			.bd li {
				display: none;
			}

			.bd li.current {
				display: block;
			}

			.wangwang_title {
				padding: 25px 10px;
				font-size: 15px;
				border-bottom: 1px solid #F2F2F2;
			}

			.wangwang_obtain {
				padding-left: 10px;
			}

			.wangwang_obtain img {
				width: 41px;
				margin-top: 15px;
			}

			.wangwang_obtainR {
				width: 84%;
				padding: 15px 10px 15px 0;
				border-bottom: 1px solid #F2F2F2;
			}

			.wangwang_date {
				font-size: 11px;
				color: #999999;
			}

			.wangwang_explain {
				font-size: 14px;
				color: #333333;
			}

			.tips {
				text-align: center;
				font-size: 12px;
				color: #999999;
				padding-top: 30px;
				background-color: #EFEFF4;
			}

			.xiatu {
				font-size: 18px;
				color: #333333;
			}

			/* 筛选 */
			#cover {
				position: fixed;
				z-index: 99;
				top: 0;
				left: 0;
				display: none;
				width: 100%;
				height: 100%;
				opacity: 0.5;
				background: #333333 none repeat scroll 0% 0%;
			}

			.screent {
				background-color: #F5F5F5;
				position: absolute;
				width: 90%;
				top: 25%;
				left: 5%;
				z-index: 99;
				display: none;
				border-radius: 5px;
			}

			.screent-title {
				padding: 21px 0;
				font-size: 18px;
				text-align: center;
				background-color: #FFFFFF;
				border-top-left-radius: 5px;
				border-top-right-radius: 5px;
				border-bottom: 1px solid #F2F2F2;
			}

			.screent-content {
				padding: 5px 10px 15px 10px;
				font-size: 13px;
				color: #333333;
				background-color: #FFFFFF;
			}

			.ul {
				margin-top: 10px;
			}

			.kuai {
				width: 30%;
				padding: 17px 0;
				float: left;
				text-align: center;
				border-radius: 5px;
				background-color: #DEF4FF;
			}

			.kuai1 {
				width: 30%;
				padding: 6px 0;
				float: left;
				margin-left: 10px;
				text-align: center;
				border-radius: 5px;
				background-color: #F5F5F5;
			}

			.kuai1 img,
			.kuai img {
				width: 20px;
				height: 20px;
				display: block;
				margin: 2px auto 0;
			}

			.bottom {
				padding: 17px 0;
				background-color: #FFFFFF;
				margin-top: 10px;
				border-bottom-left-radius: 5px;
				border-bottom-right-radius: 5px;
			}

			.qd {
				width: 80%;
				padding: 15px 0;
				border: none;
				background-color: #1B82D2;
				color: #FFFFFF;
				font-size: 15px;
				margin: 0 auto;
				border-radius: 5px;
				display: block;
			}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">资产管理</h1>
		</header>

		<div class="mui-content">
			<div class="banner enterplorer-banner">
				<div class="am-container">
					<img src="../image/assets.png" style="width: 100%;margin-top: -40px;">
				</div>
				<!-- 背景square -->
				<ul class="bg-bubbles">
					<li></li>
					<li></li>
					<li></li>
					<li></li>
					<li></li>
					<li></li>
					<li></li>
					<li></li>
					<li></li>
					<li></li>
				</ul>
				<div class="income-content">
					<div class="balance mui-left mui-pull-left">
						<div class="income-title">
							<p>余额(元)</p>
							<div class="nr">{{ balance }}</div>
						</div>
						<div class="function_button">
							<button class="mui-pull-left" id="recharge">充值</button>
							<div class="recharge"></div>
							<button class="mui-pull-right money" id="cash">提现</button>
							<div class="clearfix"></div>
						</div>
					</div>
					<div class="shuxia"></div>
					<div class="mui-right mui-pull-right tug">
						<div class="income-title">
							<p>旺旺</p>
							<div class="nr">{{ wang }}</div>
						</div>
						<button id="exchange">兑换</button>
					</div>
					<div class="clearfix"></div>
				</div>
			</div>

			<div class="Detailed">
				<div class="example">
					<div class="hd">
						<li class="current" data-type="balance">
							<span>
								<span class="icon-money"></span>
								<span>余额</span>
							</span>
						</li>
						<li data-type="wang">
							<span>
								<span class="icon-wangwang"></span>
								<span>旺旺</span>
							</span>
						</li>
						<div class="clearfix"></div>
					</div>
					<div class="bd">
						<li class="current" data-type="balance">
							<div class="more">
								<div class="moreL mui-left mui-pull-left">
									<div style="font-size: 15px;color: #333333;">{{ date }}</div>
									<span class="income">
										<span>收入 ￥</span>
										<span>{{ income }}</span>
									</span>
									<span class="income" style="margin-left: 15px;">
										<span>支出 ￥</span>
										<span>{{ expend }}</span>
									</span>
								</div>
								<div class="mui-pull-right screen">
									<div class="xian"></div>
									<div class="screenR" id="balance_more">
										<div class="mui-pull-left">更多</div>
										<div class="mui-icon mui-icon-arrowright"></div>
										<div class="clearfix"></div>
									</div>
								</div>
								<div class="clearfix"></div>
							</div>
							<template v-for="(blog, key, index) in balanceLog" :key="key">
								<div class="Detailed1">
									<div class="Detailed1l mui-pull-left">
										<img v-if="blog.type==1" src="../image/detailed1.png" alt="">
										<img v-else-if="blog.type==2" src="../image/detailed2.png" alt="">
										<img v-else-if="blog.type==3" src="../image/detailed3.png" alt="">
										<img v-else-if="blog.type==4" src="../image/detailed4.png" alt="">
										<img v-else-if="blog.type==5" src="../image/detailed5.png" alt="">
										<img v-else-if="blog.type==6" src="../image/detailed6.png" alt="">
									</div>
									<div class="Detailed1r mui-pull-right">
										<div class="Detailed1rl mui-pull-left">
											<div style="font-size: 14px;">{{ blog.remark }}</div>
											<div style="font-size: 12px;color: #BDBDBD;">
												<span>{{ blog.create_time_str }}</span>
											</div>
										</div>
										<div class="Detailed1rr mui-pull-right" style="padding-right: 10px;">
											<div style="font-size: 15px;color: #E62C2C;font-weight: 600;">
												<span v-if="blog.number > 0">+{{ blog.number }}</span>
												<span v-else>{{ blog.number }}</span>
											</div>
											<!-- <div style="font-size: 12px;color: #BDBDBD;">
												曝光1000次
											</div> -->
										</div>
									</div>
									<div class="clearfix"></div>
								</div>
							</template>
						</li>
						<li data-type="wang">
							<div class="more">
								<div class="moreL mui-left mui-pull-left" style="margin-top: 17px;">
									旺旺收入 {{profit}}
								</div>
								<div class="mui-pull-right screen">
									<div class="xian"></div>
									<div class="screenR" id="wang_more">
										<div class="mui-pull-left">更多</div>
										<div class="mui-icon mui-icon-arrowright"></div>
										<div class="clearfix"></div>
									</div>
								</div>
								<div class="clearfix"></div>
							</div>
							<!-- <div class="wangwang_title">
								<span>累计分红收益</span>
								<span style="color: #ED3F32;">258元</span>
							</div> -->
							<template v-for="(wlog, key, index) in wangLog" :key="key">
								<div class="wangwang_obtain">
									<div class="mui-pull-left">
										<img v-if="wlog.type==1" src="../image/obtain1.png">
										<img v-else-if="wlog.type==2" src="../image/obtain2.png">
										<img v-else-if="wlog.type==3" src="../image/obtain2.png">
									</div>
									<div class="wangwang_obtainR mui-pull-right">
										<div class="wangwang_explain">
											<span>{{ wlog.remark }}</span>
											<span class="mui-pull-right" style="font-size: 15px;color: #E62C2C;">+{{ wlog.number }}</span>
										</div>
										<div class="wangwang_date">
											<span>{{ wlog.create_time_str }}</span>
										</div>
									</div>
									<div class="clearfix"></div>
								</div>
							</template>
							<!-- <div class="tips">系统仅展示最近30天的收益</div> -->
						</li>
					</div>
				</div>
			</div>

		<!-- 筛选 -->
		<div id="cover"></div>
		<div class="screent">
			<div class="screent-title">
				选择交易类型
			</div>
			<div class="screent-content">
				<div class="ul">
					<div class="kuai">
						<div>
							<span>全部</span>
						</div>
					</div>
					<div class="kuai1">
						<img src="../image/detailed1.png" alt="">
						<span>广告收益</span>
					</div>
					<div class="kuai1">
						<img src="../image/detailed2.png" alt="">
						<span>店铺收入</span>
					</div>
					<div class="clearfix"></div>
				</div>
				<div class="ul">
					<div class="kuai" style="background-color:#F5F5F5;padding: 6px 0;">
						<img src="../image/detailed3.png" alt="">
						<span>收款二维码</span>
					</div>
					<div class="kuai1">
						<img src="../image/detailed4.png" alt="">
						<span>提现</span>
					</div>
					<div class="kuai1">
						<img src="../image/detailed5.png" alt="">
						<span>推广金</span>
					</div>
					<div class="clearfix"></div>
				</div>
			</div>
			<div class="bottom">
				<button class="qd">确 定</button>
			</div>
		</div>
	</body>
	<script src="../js/mui.js"></script>
	<script src="../js/util.js"></script>
	<script src="../js/mui.picker.min.js"></script>
	<script src="../js/vue.min.js"></script>
	<script>
		mui.init({
			swipeBack: true
		})
		
		var userInfo = getUserInfo();
		var vm = new Vue({
			el: '.mui-content',
			data() {
				return {
					balance: userInfo.balance,
					wang: userInfo.wang,
					date: formatDate('y-m', ''),
					type: 1,
					expend: 0,
					income: 0,
					profit: 0,
					balanceLog: null,
					wangLog: null
				}
			},
			mounted: function() {
				mui.plusReady(function () {
				    eventInit();
					getUserBalanceLog();
					getUserWangLog();
				})
			}
		})
		
		//事件初始化
		function eventInit() {
			mui('.hd').on('tap', 'li', function() {
				var type = this.dataset.type;
				if (type == 'wang') {
					document.querySelector('.hd li[data-type=balance]').classList.remove('current');
					document.querySelector('.bd li[data-type=balance]').classList.remove('current');
					document.querySelector('.bd li[data-type=wang]').classList.add('current');
				} else {
					document.querySelector('.hd li[data-type=wang]').classList.remove('current');
					document.querySelector('.bd li[data-type=wang]').classList.remove('current');
					document.querySelector('.bd li[data-type=balance]').classList.add('current');
				}
				this.classList.add('current');
			})
			
			mui('.mui-content').on('tap', '#exchange', function() {
				message('旺旺可用于年终分红!', 'center');
			})
			
			mui('.mui-content').on('tap', '#recharge', function() {
				message('充值!', 'center');
			})
			
			mui('.mui-content').on('tap', '#cash', function() {
				message('提现!', 'center');
			})
			
			mui('.mui-content').on('tap', '#balance_more', function() {
				message('查看更多余额!', 'center');
			})
			
			mui('.mui-content').on('tap', '#wang_more', function() {
				message('查看更多旺旺!', 'center');
			})
		}
		
		//获取用户余额日志
		function getUserBalanceLog() {
			mui.get($ajaxUrl  + 'member', {
					action: 'balance_log',
					token: userInfo.token,
					type: vm.type,
					date: vm.date,
					skip: 1,
					limit: 30
				}, function(res) {
					if (res.errno == 0) {
						var balanceData = res.data;
						for (var index in balanceData) {
							vm.expend = balanceData[index].expend;
							vm.income = balanceData[index].income;
							vm.balanceLog = balanceData[index].list;
							break;
						}
					}
				}, 'json'
			);
		}
		
		//获取用户余额日志
		function getUserWangLog() {
			mui.get($ajaxUrl  + 'member', {
					action: 'wang_log',
					token: userInfo.token,
					date: vm.date,
					skip: 1,
					limit: 30
				}, function(res){
					if (res.errno == 0) {
						var wangData = res.data;
						for (var key in wangData) {
							vm.profit = wangData[key].income;
							vm.wangLog = wangData[key].list;
							break;
						}
					}
				}, 'json'
			);
		}
	</script>
</html>
