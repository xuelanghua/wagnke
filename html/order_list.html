<!doctype html>
<html>

	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../css/mui.css" rel="stylesheet" />
		<style>
			.clearfix{
				clear: both;
			}
			input[type='button']:enabled:active, input[type='button'].mui-active:enabled,
			input[type='submit']:enabled:active,
			input[type='submit'].mui-active:enabled,
			input[type='reset']:enabled:active,
			input[type='reset'].mui-active:enabled,
			button:enabled:active,
			button.mui-active:enabled,
			.mui-btn:enabled:active,
			.mui-btn.mui-active:enabled
			{
				
			}
			header img{
				height: 17px;
				margin-top: 13px;
				margin-right: 10px;
			}
			.mui-bar{
				background-color: #FFFFFF;
			}
		
			.search{
				margin: 0.625rem;
				padding: 0 10px;
				border-radius: 0.3125rem;
				border: 1px solid #DDDDDD;
				background-color: #FFFFFF;
			}
			.mui-icon{
				font-size: 20px;
			}
			.search input{
				width: 90%;
				margin: 0;
				border: none;
				padding: 3px;
				font-size: 0.875rem;
			}
			
			.hd{
				font-size: 14px;
				border-top: 1px solid #DDDDDD;
				background-color: #F8F8F8;
			}
			.hd li{
				display: block;
				/* width: 20%; */
				width: 25%;
				float: left;
				padding: 10px 0;
				text-align: center;
			}
			.hd li.current{
				color: #F5CA3A;
				border-bottom: 2px solid #F5CA3A;
			}
			
			.example{
				width: 100%;
				margin-bottom: 66px;
			}
			.bd li{
				display: none;
			}
			.bd li.current{
				display: block;
			}
			.Record_list{
				margin-bottom: 10px;
				background-color: #FFFFFF;
			}
			.Record_list_tile{
				font-size: 14px;
				padding: 14px 15px;
				border-bottom: 1px solid #F2F2F2;
			}
			.Record_list_tile .mui-icon{
				color: #878787;
			}
			.commodity_information{
				padding: 13px 15px;
				border-bottom: 1px solid #F2F2F2;
			}
			.commodity_information_chart{
				width: 65px;
				height: 65px;
			}
			.commodity_information_chart img{
				width: 100%;
				height: 100%;
			}
			.jianshu{
				width: 76%;
				font-size: 12px;
				color: #999999;
			}
			.font{
				font-size: 14px;
				color: #000000;
				padding-bottom: 10px;
			}
			.total{
				font-size: 12px;
				margin-top: 10px;
				text-align: right;
			}
			.total span{
				font-size: 14px;
			}
			
			.purchaser{
				padding: 10px 15px;
				font-size: 14px;
			}
			.purchaser_chart{
				width: 31px;
				height: 31px;
				display: block;
			}
			.purchaser_chart img{
				width: 100%;
				height: 100%;
				border-radius: 50%;
			}
			.button{
				border: none;
				color: #F5CA3A;
				border: 1px solid #F5CA3A;
			}
			.button:enabled:active{
				color: #fff;
				background-color: #ecd482;
			}
			
			.current a{
				color: #333333;
			}
			
			.ship{
				margin-bottom: 5px;
				padding: 10px;
				background-color: #F8F8F8;
			}
			
			.lianxi{
				color: #999999;
				margin-right: 15px;
				border: 1px solid #999999;
			}
			
			.complete{
				color: #CC9C2D;
			}
			
			button{
				width: 80px;
			}
			
			.mui-search input {
				background-color: #fff;
				border-radius: 0.3125rem;
				border: 1px solid #DDD;
			}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<div class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></div>
			<h1 class="mui-title">订单管理</h1>
		</header>

		<div class="mui-content">
			<div class="mui-input-row mui-search" style="margin: 10px 10px -5px 10px;">
				<input type="search" class="mui-input-clear" name="goods_name" placeholder="搜索商品名称">
			</div>

			<div class="hd">
				<li class="current" data-status="1">待付款</li>
				<li data-status="2">待发货</li>
				<li data-status="3">已发货</li>
				<li data-status="4">已完成</li>
				<!-- <li data-status="5">退货</li> -->
				<div class="clearfix"></div>
			</div>
			<div class="example">
				<div class="bd">
					<li class="current" data-status="1">
						<a href="order_details.html">
							<div class="Record_list">
								<div class="Record_list_tile">
									<span>待付款(1天7小时后将自动取消订单)</span>
									<span class="mui-icon mui-icon-arrowright mui-pull-right"></span>
								</div>
								<div class="commodity_information">
									<div class="ship">
										<div class="commodity_information_chart mui-pull-left">
											<img src="../image/rotation_chart.png">
										</div>
										<div class="mui-pull-right jianshu">
											<div class="font">
												<span>旺客</span>
												<span class="mui-pull-right">￥20/件</span>
											</div>
											<div>
												<span>规格：默认</span>
												<span class="mui-pull-right">x1</span>
											</div>
										</div>
										<div class="clearfix"></div>
									</div>
									<div class="total">共1件商品合计:￥<span>25.00</span>(含运费:￥5.00)</div>
								</div>
								<div class="purchaser">
									<div class="mui-pull-left">
										<span class="purchaser_chart mui-pull-left">
											<img src="../image/bj.jpg">
										</span>
										<span class="mui-pull-left" style="margin: 5px 0 0 10px;">微信昵称</span>
										<div class="clearfix"></div>
									</div>
									<button class="mui-pull-right button">联系TA</button>
									<div class="clearfix"></div>
								</div>
							</div>
						</a>
						<a href="order_details.html">
							<div class="Record_list">
								<div class="Record_list_tile">
									<span>待付款(1天7小时后将自动取消订单)</span>
									<span class="mui-icon mui-icon-arrowright mui-pull-right"></span>
								</div>
								<div class="commodity_information">
									<div class="ship">
										<div class="commodity_information_chart mui-pull-left">
											<img src="../image/rotation_chart.png">
										</div>
										<div class="mui-pull-right jianshu">
											<div class="font">
												<span>旺客</span>
												<span class="mui-pull-right">￥20/件</span>
											</div>
											<div>
												<span>规格：默认</span>
												<span class="mui-pull-right">x1</span>
											</div>
										</div>
										<div class="clearfix"></div>
									</div>
									<div class="ship">
										<div class="commodity_information_chart mui-pull-left">
											<img src="../image/rotation_chart.png">
										</div>
										<div class="mui-pull-right jianshu">
											<div class="font">
												<span>旺客</span>
												<span class="mui-pull-right">￥20/件</span>
											</div>
											<div>
												<span>规格：默认</span>
												<span class="mui-pull-right">x1</span>
											</div>
										</div>
										<div class="clearfix"></div>
									</div>
									<div class="total">共1件商品合计:￥<span>25.00</span>(含运费:￥5.00)</div>
								</div>
								<div class="purchaser">
									<div class="mui-pull-left">
										<span class="purchaser_chart mui-pull-left">
											<img src="../image/bj.jpg">
										</span>
										<span class="mui-pull-left" style="margin: 5px 0 0 10px;">微信昵称</span>
										<div class="clearfix"></div>
									</div>
									<button class="mui-pull-right button">联系TA</button>
									<div class="clearfix"></div>
								</div>
							</div>
						</a>
					</li>
					<li data-status="2">
						<a href="order_details1.html">
							<div class="Record_list">
								<div class="Record_list_tile">
									<span>
										<span>付款时间：</span>
										<span>2018-08-21 18:20:20</span>
									</span>
									<span class="mui-icon mui-icon-arrowright mui-pull-right"></span>
								</div>
								<div class="commodity_information">
									<div class="ship">
										<div class="commodity_information_chart mui-pull-left">
											<img src="../image/rotation_chart.png">
										</div>
										<div class="mui-pull-right jianshu">
											<div class="font">
												<span>旺客</span>
												<span class="mui-pull-right">￥20/件</span>
											</div>
											<div>
												<span>规格：默认</span>
												<span class="mui-pull-right">x1</span>
											</div>
										</div>
										<div class="clearfix"></div>
									</div>
									<div class="total">共1件商品合计:￥<span>25.00</span>(含运费:￥5.00)</div>
								</div>
								<div class="purchaser">
									<div class="mui-pull-left">
										<span class="purchaser_chart mui-pull-left">
											<img src="../image/bj.jpg">
										</span>
										<span class="mui-pull-left" style="margin: 5px 0 0 10px;">微信昵称</span>
										<div class="clearfix"></div>
									</div>
									<div>
										<button class="mui-pull-right button">发货</button>
										<button class="mui-pull-right lianxi">联系TA</button>
									</div>
									<div class="clearfix"></div>
								</div>
							</div>
						</a>
					</li>
					<li data-status="3">
						<a href="order_details2.html">
							<div class="Record_list">
								<div class="Record_list_tile">
									<span>
										<span>发货时间：</span>
										<span>2018-08-21 18:20:20</span>
									</span>
									<span class="mui-icon mui-icon-arrowright mui-pull-right"></span>
								</div>
								<div class="commodity_information">
									<div class="ship">
										<div class="commodity_information_chart mui-pull-left">
											<img src="../image/rotation_chart.png">
										</div>
										<div class="mui-pull-right jianshu">
											<div class="font">
												<span>旺客</span>
												<span class="mui-pull-right">￥20/件</span>
											</div>
											<div>
												<span>规格：默认</span>
												<span class="mui-pull-right">x1</span>
											</div>
										</div>
										<div class="clearfix"></div>
									</div>
									<div class="ship">
										<div class="commodity_information_chart mui-pull-left">
											<img src="../image/rotation_chart.png">
										</div>
										<div class="mui-pull-right jianshu">
											<div class="font">
												<span>旺客</span>
												<span class="mui-pull-right">￥20/件</span>
											</div>
											<div>
												<span>规格：默认</span>
												<span class="mui-pull-right">x1</span>
											</div>
										</div>
										<div class="clearfix"></div>
									</div>
									<div class="total">共1件商品合计:￥<span>25.00</span>(含运费:￥5.00)</div>
								</div>
								<div class="purchaser">
									<div class="mui-pull-left">
										<span class="purchaser_chart mui-pull-left">
											<img src="../image/bj.jpg">
										</span>
										<span class="mui-pull-left" style="margin: 5px 0 0 10px;">微信昵称</span>
										<div class="clearfix"></div>
									</div>
									<div>
										<button class="mui-pull-right button">查看物流</button>
										<button class="mui-pull-right lianxi">联系TA</button>
									</div>
									<div class="clearfix"></div>
								</div>
							</div>
						</a>
					</li>
					<li data-status="4">
						<a href="order_details2.html">
							<div class="Record_list">
								<div class="Record_list_tile">
									<span class="complete">已完成</span>
									<span class="mui-icon mui-icon-arrowright mui-pull-right"></span>
								</div>
								<div class="commodity_information">
									<div class="ship">
										<div class="commodity_information_chart mui-pull-left">
											<img src="../image/rotation_chart.png">
										</div>
										<div class="mui-pull-right jianshu">
											<div class="font">
												<span>旺客</span>
												<span class="mui-pull-right">￥20/件</span>
											</div>
											<div>
												<span>规格：默认</span>
												<span class="mui-pull-right">x1</span>
											</div>
										</div>
										<div class="clearfix"></div>
									</div>
									<div class="total">共1件商品合计:￥<span>25.00</span>(含运费:￥5.00)</div>
								</div>
								<div class="purchaser">
									<div class="mui-pull-left">
										<span class="purchaser_chart mui-pull-left">
											<img src="../image/bj.jpg">
										</span>
										<span class="mui-pull-left" style="margin: 5px 0 0 10px;">微信昵称</span>
										<div class="clearfix"></div>
									</div>
									<button class="mui-pull-right button">联系TA</button>
									<div class="clearfix"></div>
								</div>
							</div>
						</a>
					</li>
				</div>
			</div>
		</div>
		<script src="../js/mui.js"></script>
		<script src="../js/util.js"></script>
		<script type="text/javascript">
			mui.init({
				swipeBack: true,
			})
			
			var userInfo = getUserInfo();
			mui.plusReady(function () {
			   eventInit();
			})
			
			//事件初始化
			function eventInit() {
				//搜索监听
				document.onkeydown = function(event) {
					var e = event || window.event || arguments.callee.caller.arguments[0];
					if (e && e.keyCode == 13) { // enter 键
						goodsName = document.querySelector('input[name=goods_name]').value;
						getOrderList();
					}
				};
				
				//切换订单选项卡
				mui('.hd').on('tap', 'li', function() {
					mui('.hd li').each(function() {
						this.className = '';
					})
					var status = this.dataset.status;
					this.className = 'current';
					mui('.bd li').each(function() {
						this.className = '';
					})
					document.querySelector('.bd li[data-status="' + status + '"]').className = 'current';
				})
			}
			
			//获取订单列表
			function getOrderList() {
				plus.nativeUI.showWaiting();
				mui.post($ajaxUrl + 'order', {
					action: 'order_list',
					token: userInfo.token,
					goods_name: goodsName
				}, function(res) {
					var goodsList = res.data;
					var onSale = goodsList.on_sale;
					var soldOut = goodsList.sold_out;
					var offSale = goodsList.off_sale;
					var emptyContent = '<div style="padding: 30px 15px;text-align: center;color: #ccc;padding-right: 45px;">没有数据</div>';
					if (onSale.length > 0) {
						var onSaleStr = '';
						for (var i in onSale) {
							onSaleStr += '<li class="mui-table-view-cell">';
								onSaleStr += '<div class="chart mui-pull-left">';
									onSaleStr += '<img src="' + onSale[i].cover + '">';
								onSaleStr += '</div>';
								onSaleStr += '<div class="mui-pull-right customer-content">';
									onSaleStr += '<div class="customer_information">' + onSale[i].name + '</div>';
									onSaleStr += '<h4>￥' + onSale[i].price + '</h4>';
									onSaleStr += '<div style="font-size: 12px;">';
										onSaleStr += '<span class="mui-pull-left">库存：' + onSale[i].stock + '</span>';
										onSaleStr += '<span class="mui-pull-right genduo">...</span>';
									onSaleStr += '</div>';
									onSaleStr += '<div class="playb">';
										onSaleStr += '<div class="jiao"></div>';
										onSaleStr += '<div class="play" data-type="edit" data-id="' + onSale[i].id + '">';
											onSaleStr += '<img src="../image/edit.png" />';
											onSaleStr += '<div>编辑</div>';
										onSaleStr += '</div>';
										onSaleStr += '<div class="play" data-type="off" data-id="' + onSale[i].id + '">';
											onSaleStr += '<img src="../image/lower_shelf.png" />';
											onSaleStr += '<div>下架</div>';
										onSaleStr += '</div>';
										onSaleStr += '<div class="play" data-type="del" data-id="' + onSale[i].id + '">';
											onSaleStr += '<img src="../image/delete.png" />';
											onSaleStr += '<div style="margin-top: -1px;">删除</div>';
										onSaleStr += '</div>';
										onSaleStr += '<div class="play" data-type="share" data-id="' + onSale[i].id + '">';
											onSaleStr += '<img src="../image/extension.png" />';
											onSaleStr += '<div>推广</div>';
										onSaleStr += '</div>';
										onSaleStr += '<div class="clearfix"></div>';
									onSaleStr += '</div>';
								onSaleStr += '</div>';
							onSaleStr += '</li>';
						}
						document.getElementById('item1_list').innerHTML = onSaleStr;
					} else {
						document.getElementById('item1_list').innerHTML = emptyContent;
					}
					if (soldOut.length > 0) {
						var soldOutStr = '';
						for (var j in onSale) {
							soldOutStr += '<li class="mui-table-view-cell">';
								soldOutStr += '<div class="chart mui-pull-left">';
									soldOutStr += '<img src="' + soldOut[j].cover + '">';
								soldOutStr += '</div>';
								soldOutStr += '<div class="mui-pull-right customer-content">';
									soldOutStr += '<div class="customer_information">' + soldOut[j].name + '</div>';
									soldOutStr += '<h4>￥' + soldOut[j].price + '</h4>';
									soldOutStr += '<div style="font-size: 12px;">';
										soldOutStr += '<span class="mui-pull-left">库存：' + soldOut[j].stock + '</span>';
										soldOutStr += '<span class="mui-pull-right genduo">...</span>';
									soldOutStr += '</div>';
									soldOutStr += '<div class="playb">';
										soldOutStr += '<div class="jiao"></div>';
										soldOutStr += '<div class="play" data-type="edit" data-id="' + soldOut[j].id + '">';
											soldOutStr += '<img src="../image/edit.png" />';
											soldOutStr += '<div>编辑</div>';
										soldOutStr += '</div>';
										soldOutStr += '<div class="play" data-type="off" data-id="' + soldOut[j].id + '">';
											soldOutStr += '<img src="../image/lower_shelf.png" />';
											soldOutStr += '<div>下架</div>';
										soldOutStr += '</div>';
										soldOutStr += '<div class="play" data-type="del" data-id="' + soldOut[j].id + '">';
											soldOutStr += '<img src="../image/delete.png" />';
											soldOutStr += '<div style="margin-top: -1px;">删除</div>';
										soldOutStr += '</div>';
										soldOutStr += '<div class="play" data-type="share" data-id="' + soldOut[j].id + '">';
											soldOutStr += '<img src="../image/extension.png" />';
											soldOutStr += '<div>推广</div>';
										soldOutStr += '</div>';
										soldOutStr += '<div class="clearfix"></div>';
									soldOutStr += '</div>';
								soldOutStr += '</div>';
							soldOutStr += '</li>';
						}
						document.getElementById('item2_list').innerHTML = soldOutStr;
					} else {
						document.getElementById('item2_list').innerHTML = emptyContent;
					}
					if (offSale.length > 0) {
						var offSaleStr = '';
						for (var k in offSale) {
							offSaleStr += '<li class="mui-table-view-cell">';
								offSaleStr += '<div class="chart mui-pull-left">';
									offSaleStr += '<img src="' + offSale[k].cover + '">';
								offSaleStr += '</div>';
								offSaleStr += '<div class="mui-pull-right customer-content">';
									offSaleStr += '<div class="customer_information">' + offSale[k].name + '</div>';
									offSaleStr += '<h4>￥' + offSale[k].price + '</h4>';
									offSaleStr += '<div style="font-size: 12px;">';
										offSaleStr += '<span class="mui-pull-left">库存：' + offSale[k].stock + '</span>';
										offSaleStr += '<span class="mui-pull-right genduo">...</span>';
									offSaleStr += '</div>';
									offSaleStr += '<div class="playb">';
										offSaleStr += '<div class="jiao"></div>';
										offSaleStr += '<div class="play" data-type="edit" data-id="' + offSale[k].id + '">';
											offSaleStr += '<img src="../image/edit.png" />';
											offSaleStr += '<div>编辑</div>';
										offSaleStr += '</div>';
										offSaleStr += '<div class="play" data-type="on" data-id="' + offSale[k].id + '">';
											offSaleStr += '<img src="../image/on_sale.png" />';
											offSaleStr += '<div>上架</div>';
										offSaleStr += '</div>';
										offSaleStr += '<div class="play" data-type="del" data-id="' + offSale[k].id + '">';
											offSaleStr += '<img src="../image/delete.png" />';
											offSaleStr += '<div style="margin-top: -1px;">删除</div>';
										offSaleStr += '</div>';
										offSaleStr += '<div class="play" data-type="share" data-id="' + offSale[k].id + '">';
											offSaleStr += '<img src="../image/extension.png" />';
											offSaleStr += '<div>推广</div>';
										offSaleStr += '</div>';
										offSaleStr += '<div class="clearfix"></div>';
									offSaleStr += '</div>';
								offSaleStr += '</div>';
							offSaleStr += '</li>';
						}
						document.getElementById('item3_list').innerHTML = offSaleStr;
					} else {
						document.getElementById('item3_list').innerHTML = emptyContent;
					}
					plus.nativeUI.closeWaiting();
				}, 'json');
			}
		</script>
	</body>
</html>
