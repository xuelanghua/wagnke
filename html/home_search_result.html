<!doctype html>
<html>

	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link rel="stylesheet" href="../css/mui.min.css">
		<style type="text/css">
			body,
			html {
				background-color: #f2f2f2;
			}

			.mui-bar-nav {
				display: flex;
				align-items: center;
				background: #f2f2f2;
				box-shadow: none;
				box-sizing: border-box;
			}

			.mui-bar-nav:after {
				content: '';
				position: absolute;
				display: block;
				bottom: 0;
				left: 0;
				right: 0;
				height: 1px;
				background-color: #DDDDDD;
				transform: scaleY(0.5);
				-webkit-transform: scaleY(0.5);
			}

			.mui-bar-nav.mui-bar .mui-action-back {
				margin-right: 5px;
				padding-left: 5px;
				padding-right: 5px;
				color: #191919;
			}

			.mui-bar-nav.mui-bar .mui-icon-clear {
				color: #aeaeae;
				padding-left: 5px;
				padding-right: 10px;
				position: relative;
				font-size: 20px;
			}

			.mui-bar-nav.mui-bar input[type=search] {
				border: none;
				box-shadow: none;
				outline: none;
				padding: 0;
				margin: 0 10px 0 0;
				background: transparent;
				width: auto;
				flex-grow: 1;
				height: 36px;
				text-align: left;
				font-size: 16px;
			}

			.mui-bar-nav input::-webkit-input-placeholder {
				color: #999999;
				font-size: 14px;
			}

			.mui-bar-nav form {
				flex-grow: 1;
				display: flex;
				align-items: center;
			}

			/* 头部完结 */
			.page-mini-card {
				width: 100%;
				margin: 15px 0;
				background-color: #FFFFFF;
				padding-bottom: 0;
			}

			.page-mini-card .headline-cont {
				height: 0.78rem;
				padding: 0 15px;
				display: flex;
				align-items: center;
				font-size: 0.3rem;
				color: #999999;
			}

			.page-mini-card .mui-table-view:before {
				left: 15px;
				background-color: #DDDDDD;
			}

			.page-mini-card .mui-table-view-cell {
				padding: 10px 15px;
				height: auto;
			}

			.page-mini-card .mui-table-view-cell:after {
				left: 60px;
				background-color: #F2F2F2;
			}

			.mui-table-view:after {
				display: none;
			}

			.mui-table-view-cell:last-child:after {
				/* height: 1px; */
			}

			.page-mini-card img {
				width: 40px;
				height: 40px;
				border-radius: 50%;
				object-fit: cover;
				margin-right: 10px;
				flex-shrink: 0;
			}

			.page-mini-card .mui-table-view-cell {
				display: flex;
				align-items: center;
			}

			.mui-badge {
				border-radius: 5px;
				background-color: #2289ff;
				font-size: 0.2rem;
			}

			.team-info {
				flex-grow: 1;
			}

			.mui-badge-warning {
				background-color: #f7cb2b;
			}

			.team-info-top,
			.team-info-btm {
				display: flex;
				flex-grow: 1;
				align-items: center;
				justify-content: space-between;
				position: relative;
				overflow: hidden;
				box-sizing: border-box;
			}

			.team-info-top {
				margin-bottom: 5px;
			}

			.team-info-top span {
				font-size: 15px;
				color: #333333;
			}

			.team-info-top .mui-badge {
				border-radius: 3px;
				background-color: #2289ff;
				font-size: 0.2rem;
				color: #FFFFFF;
			}

			.team-info-top .mui-badge-warning {
				background-color: #f7cb2b;
			}

			.team-info-btm span {
				color: #999999;
				font-size: 12px;
			}

			.team-info-top .mui-ellipsis {
				max-width: 6.05rem;
			}

			.page-mini-card-goods .goods-img {
				width: 64px;
				height: 64px;
				border-radius: 2px;
			}

			.page-mini-card-goods .team-info-top .mui-ellipsis-2 {
				max-width: 5.9rem;
			}

			.page-mini-card-goods .sign-img {
				height: 13px;
				width: auto;
				border-radius: 0;
			}

			.page-mini-card-goods .team-info-btm .profit-sign {
				color: #f2422b;
			}

			.dynamic-title {
				font-size: 0.24rem;
				color: #999999;
				display: flex;
				align-items: center;
				position: relative;
				overflow: hidden;
				justify-content: flex-start;
				width: 100%;
				padding: 10px 0;
				line-height: 1;
			}

			.dynamic-title:before {
				content: "";
				display: inline-block;
				background-color: #2289FF;
				border-radius: 50%;
				margin-right: 10px;
				width: 18px;
				height: 18px;
				position: relative;
			}

			.page-mini-card .dynamic-list {
				flex-direction: column;
			}

			.page-mini-card .dynamic-list .user-name {
				margin-right: 10px;
			}

			.dynamic-container {
				padding-left: 0.5rem;
			}

			.dynamic-container p {
				font-size: 0.28rem;
				color: #333333;
				margin-bottom: 10px;
			}

			.dynamic-container .dynamic-img {
				line-height: 0;
				max-width: 4.2rem;
			}

			.dynamic-container .dynamic-img .img-item {
				width: 1.2rem;
				height: 1.2rem;
				object-fit: cover;
				margin-right: 0.2rem;
				margin-bottom: 0.2rem;
				border-radius: 0;
				line-height: 0;
			}
			.dynamic-container .video-dynamic {
				width: 4rem;
				height: 2.5rem;
				position: relative;
			}
			.dynamic-container .video-dynamic img{
				width: 100%;
				height: 100%;
				border-radius: 0;
				margin: 0;
			}
			.dynamic-container .video-dynamic .player-btn{
				width: 1rem;
				height: 1rem;
				position: absolute;
				margin: 0;
				top: 50%;
				left: 50%;
				-webkit-transform: translate(-50%,-50%);
				transform: translate(-50%,-50%);
			}
			[v-cloak] {
				display: none;
			}
		</style>
	</head>

	<body>
		<div id="mui-content" v-cloak>
			<header class="mui-bar mui-bar-nav">
				<span class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></span>
				<form onsumit="return false">
					<input id="search" type="search" name="" value="" v-model="keyword" placeholder="搜索" />
				</form>
				<span class="mui-icon mui-icon-clear" v-show="keyword" @tap="keyword=''"></span>
			</header>
			<div class="mui-content">
				<!-- 团队 -->
				<div class="page-mini-card page-mini-card-team">
					<div class="headline-cont">团队</div>
					<ul class="mui-table-view">
						<li class="mui-table-view-cell">
							<img src="../image/5E0eH.png">
							<div class="team-info">
								<div class="team-info-top">
									<span>房东的猫（20人）</span>
									<span class="mui-badge mui-badge-primary">正式团队</span>
								</div>
								<div class="team-info-btm">
									<span>佰级别收入</span>
									<span>排名：899</span>
									<span>创建人：路飞大大</span>
								</div>
							</div>
						</li>
						<li class="mui-table-view-cell"><img src="../image/5E0eH.png">
							<div class="team-info">
								<div class="team-info-top">
									<span>房东的猫（20人）</span>
									<span class="mui-badge mui-badge-warning">数据团队</span>
								</div>
								<div class="team-info-btm">
									<span>佰级别收入</span>
									<span>排名：899</span>
									<span>创建人：路飞大大</span>
								</div>
							</div>
						</li>
					</ul>
				</div>
				<!-- 课程 -->
				<div class="page-mini-card page-mini-card-team mui-hidden">
					<div class="headline-cont">课程</div>
					<ul class="mui-table-view">
						<li class="mui-table-view-cell" v-for="i in 2">
							<img src="../image/5E0eH.png">
							<div class="team-info">
								<div class="team-info-top">
									<span class="mui-ellipsis">这是很nb的课程，你应该要报名啊，不然以后就没了 可惜了，可惜了</span>
								</div>
								<div class="team-info-btm">
									<span>团队：9527</span>
									<span>讲师：西瓜达人</span>
								</div>
							</div>
						</li>
					</ul>
				</div>
				<!-- 商品 -->
				<div class="page-mini-card page-mini-card-goods mui-hidden">
					<div class="headline-cont">商品</div>
					<ul class="mui-table-view">
						<li class="mui-table-view-cell" v-for="i in 3">
							<img class="goods-img" src="../image/5E0eH.png">
							<div class="team-info">
								<div class="team-info-top">
									<span class="mui-ellipsis-2">这是很nb的课程，你应该要报名啊，不然以后就没以后就没以后就没以后就没了 可惜了，可惜了</span>
								</div>
								<div class="team-info-btm">
									<span class="profit-sign">利润：&yen;95</span>
									<span>团队：比克魔王</span>
									<img class="sign-img" src="../image/discover/official-sign.png">
								</div>
							</div>
						</li>
					</ul>
				</div>
				<!-- 动态 -->
				<div class="page-mini-card">
					<div class="headline-cont">动态</div>
					<ul class="mui-table-view">
						<li class="mui-table-view-cell dynamic-list">
							<div class="dynamic-title">
								<span class="user-name">张龙飞</span>
								<span>2019-09-17</span>
							</div>
							<div class="dynamic-container">
								<p class="mui-ellipsis-2">
									美文网汇集以爱情,亲情,友情,人生为主题的伤感情感美文网站,内含经典美文,哲理美文,伤感励志等美文欣赏,提供短篇故事,心情随笔日记,优美散文精选,现代诗歌大全,表白
								</p>
								<!-- 如果是图片动态 -->
								<div class="dynamic-img mui-hidden">
									<img class="img-item" src="../image/5E0eH.png" v-for="i in 9">
								</div>
								<!-- 如果是视频动态 -->
								<div class="video-dynamic">
									<img src="../image/5E0eH.png" >
									<img class="player-btn" src="../image/icon/video-player.png">
								</div>
							</div>
						</li>
					</ul>
				</div>
			</div>
		</div>
		<script src="../js/mui.js"></script>
		<script src="../js/util.js"></script>
		<script src="../js/vue.min.js"></script>
		<script type="text/javascript">
			var userInfo = getUserInfo();
			var app = new Vue({
				el: "#mui-content",
				data: {
					keyword: '',
					classify: '',
					searchHistory: [],
					// prevKeyWord: ''
				},
				created: function() {
					// 初始化字体大小
					var viewport = document.documentElement.clientWidth;
					if (viewport > 750) {
						viewport = 750
					}
					document.documentElement.style.fontSize = viewport / 7.5 + "px";
					// 初始化字体大小结束	
				},
				methods: {
					cancel: function() {
						plus.webview.close("home_search_result", "none");
					}
				},
				mounted: function() {
					mui.plusReady(function() {
						// 获取搜索记录
						var searchHistory = JSON.parse(plus.storage.getItem('searchHistory'));
						if (searchHistory) {
							app.searchHistory = searchHistory;
						}
						var self = plus.webview.currentWebview();
						app.keyword = self.keyword;
						classify = self.classify;
						startSearch();
					})
					// 监听搜索
					document.getElementById("search").addEventListener("keypress", function(event) {
						var keyword = app.keyword.replace(/^\s*|\s*$/g, "");
						// if (app.prevKeyWord == keyword) {
						// 	event.preventDefault();
						// 	return false;
						// }
						// app.prevKeyWord = keyword;
						if (event.keyCode == "13") {
							if (keyword != '') {
								plus.key.hideSoftKeybord();
								var idx = app.searchHistory.indexOf(keyword);
								//没有则返回-1
								if (idx == -1) {
									app.searchHistory.unshift(keyword);
									if (app.searchHistory.length > 12) {
										app.searchHistory = app.searchHistory.splice(0, 12);
										plus.storage.setItem('searchHistory', JSON.stringify(app.searchHistory));
										mui.fire(plus.webview.currentWebview().opener(), 'renewal', {
											searchHistory: app.searchHistory
										});
										startSearch();
									} else {
										plus.storage.setItem('searchHistory', JSON.stringify(app.searchHistory));
										mui.fire(plus.webview.currentWebview().opener(), 'renewal', {
											searchHistory: app.searchHistory
										});
										startSearch();
									}
								} else {
									startSearch();
								}
								// 阻止页面刷新
								event.preventDefault();
							} else {
								message("请输入关键词！");
							}
						} else {
							// 点的不是搜索按钮
						}
					});
				}
			})
			// 开始搜索
			function startSearch() {
				logs(app.keyword);
				// logs(app.classify);
				return false;
				mui.post($ajaxUrl + "", {
					token: userInfo.token,
					keyword: app.keyword,
					classify: app.classify
				}, function(e) {
					if (e.errno == 0) {
						// 搜索成功
					} else {
						// 搜索失败
					}
				})
			}
		</script>
	</body>

</html>
